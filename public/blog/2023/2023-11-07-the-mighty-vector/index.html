<!DOCTYPE html>
<html lang="en">
  <head>
    <title>The Mighty Vector - Jeff Mitchell</title>
    
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"><meta name="description" content="A blog mostly about Rust...mostly... The Mighty Vector An article introducing the vector collection type in Rust."/><meta name="keywords" content="Beginner Guides, rust, collections, vectors" />
    <meta property="og:title" content="jeff-mitchell.dev -&nbsp;The Mighty Vector" />
    <meta property="og:type" content="website"/><meta property="og:url" content="https:&#x2F;&#x2F;jeff-mitchell.dev&#x2F;blog&#x2F;2023&#x2F;2023-11-07-the-mighty-vector&#x2F;"/><meta property="og:description" content="An article introducing the vector collection type in Rust."/>
    <link rel="preload" href="https://jeff-mitchell.dev/assets/fonts/FiraCode-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
    <link rel="preload" href="https://jeff-mitchell.dev/assets/fonts/FiraCode-Bold.woff2" as="font" type="font/woff2" crossorigin="anonymous">

    <link rel="stylesheet" href="https://jeff-mitchell.dev/style.css?h=97e262212a0704163528">
    <link rel="stylesheet" href=" https://jeff-mitchell.dev/color/orange.css?h=a5a5d7faf9d4bc3e0b18">
    
<link rel="alternate" type="application/atom+xml" title="jeff-mitchell.dev RSS" href="https://jeff-mitchell.dev/atom.xml"></head>
  <body>
    <div class="container center">
<header class="header">
    <div class="header__inner">
        <div class="header__logo">
            <a href="&#x2F;">
    <div class="logo">
        jeff-mitchell.dev :: mis-adventures with the Rust programming language
    </div>
</a>
        </div>
        <div class="menu-trigger">menu</div>
    </div>
    
    <nav class="menu">
        <ul class="menu__inner menu__inner--desktop">
            
            
        <li>
            <a href="
    
        https://jeff-mitchell.dev/
    
">home</a>
        </li>
        <li>
            <a href="
    
        https://jeff-mitchell.dev/about/
    
">about</a>
        </li>
        <li>
            <a href="
    
        https://jeff-mitchell.dev/categories
    
">categories</a>
        </li>
        <li>
            <a href="
    
        https://jeff-mitchell.dev/tags
    
">tags</a>
        </li>
        <li>
            <a href="
    
        https://jeff-mitchell.dev/projects
    
">projects</a>
        </li>
        <li>
            <a href="
    
        https://jeff-mitchell.dev/resources
    
">resources</a>
        </li>
        <li>
            <a href="
    
        https://jeff-mitchell.dev/atom.xml
    
">RSS</a>
        </li>
        <li>
            <a href="
    
        https:&#x2F;&#x2F;github.com&#x2F;sentinel1909
    
">GitHub</a>
        </li>
        <li>
            <a href="
    
        https:&#x2F;&#x2F;query.rs
    
">query.rs</a>
        </li></ul>

        <ul class="menu__inner menu__inner--mobile">
            
        <li>
            <a href="
    
        https://jeff-mitchell.dev/
    
">home</a>
        </li>
        <li>
            <a href="
    
        https://jeff-mitchell.dev/about/
    
">about</a>
        </li>
        <li>
            <a href="
    
        https://jeff-mitchell.dev/categories
    
">categories</a>
        </li>
        <li>
            <a href="
    
        https://jeff-mitchell.dev/tags
    
">tags</a>
        </li>
        <li>
            <a href="
    
        https://jeff-mitchell.dev/projects
    
">projects</a>
        </li>
        <li>
            <a href="
    
        https://jeff-mitchell.dev/resources
    
">resources</a>
        </li>
        <li>
            <a href="
    
        https://jeff-mitchell.dev/atom.xml
    
">RSS</a>
        </li>
        <li>
            <a href="
    
        https:&#x2F;&#x2F;github.com&#x2F;sentinel1909
    
">GitHub</a>
        </li>
        <li>
            <a href="
    
        https:&#x2F;&#x2F;query.rs
    
">query.rs</a>
        </li>
        </ul>
    </nav>

    </header>
<div class="search-container">
        <input type="text" id="search" placeholder="Search...">
        <div class="search-results">
          <div class="search-results__items"></div>
        </div>
      </div>
      <div class="content"><article class="post">
        <header>
            <h1 class="post-title">
                <a href="https:&#x2F;&#x2F;jeff-mitchell.dev&#x2F;blog&#x2F;2023&#x2F;2023-11-07-the-mighty-vector&#x2F;">The Mighty Vector</a>
            </h1>
            
    <div class="post-meta">
        <span class="post-date">2023.11.07
                </span>

        <span class="post-author">
    ::
    Jeff Mitchell</span>

        

    
    :: {<a href="https://jeff-mitchell.dev/categories/beginner-guides/">Beginner Guides</a>} 

            
    ::
    #<a href="https://jeff-mitchell.dev/tags/rust/">rust</a>
        
    #<a href="https://jeff-mitchell.dev/tags/collections/">collections</a>
        
    #<a href="https://jeff-mitchell.dev/tags/vectors/">vectors</a>
        
    
            
        
    </div>

            
    
</header><h2 id="indtroduction">Indtroduction</h2>
<p>Today I resume my journey through the Rust Book, in the spotlight is the vector type.</p>
<p>The Rust Book introduces vectors as a &quot;collection&quot;. A vector is similar to an array type, but with the critical difference that a vector can grow and shrink in size. A vector is capable of storing a list of items in a single data structure. All the individual values in a vector are stored next to each other in memory. Vectors can only store data of the same type.</p>
<p>I called this article &quot;The Mighty Vector&quot; because vectors are an extremely versatile and useful way of storing data. I think you'll use them quite a bit in your own Rust adventures.</p>
<h2 id="creation">Creation</h2>
<h3 id="vec-new-function">Vec::new() Function</h3>
<p>A fresh, empty vector can be created like so:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">let</span><span> origin_coordinates: Vec&lt;</span><span style="color:#b48ead;">i32</span><span>&gt; = Vec::new();
</span></code></pre>
<p>Since we haven't initialized this coordinates vector with values, we have to tell the compiler what we want, because otherwise it won't know. The vector type provided by the Rust standard library is implemented using generics and can hold any type. In this case we've said that our coordinates vector is going to contain i32 elements.</p>
<h3 id="vec-macro">vec! Macro</h3>
<p>More often than not, we want to initialize a vector with some values. Rust gives us a macro, the vec! macro, which creates a vector with whatever values we choose:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">let</span><span> origin_coordinates = vec![</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">0</span><span>];
</span></code></pre>
<p>The initial values allow the compiler to infer what we want, so we don't have to use a type annotation like in the first example.</p>
<h3 id="modifying-a-vector">Modifying a Vector</h3>
<p>Hopefully you recall that all variables in Rust, when declared, are immutable, they can't be changed. If we know we need to change the values in our vector, we need to use the mut keyword:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">let mut</span><span> coordinates = vec![</span><span style="color:#d08770;">1</span><span>, </span><span style="color:#d08770;">3</span><span>, </span><span style="color:#d08770;">5</span><span>];
</span></code></pre>
<p>Then, we can add values to this vector by using the push method:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span>coordinates.</span><span style="color:#96b5b4;">push</span><span>(</span><span style="color:#d08770;">10</span><span>);
</span><span>coordinates.</span><span style="color:#96b5b4;">push</span><span>(</span><span style="color:#d08770;">15</span><span>);
</span><span>coordinates.</span><span style="color:#96b5b4;">push</span><span>(</span><span style="color:#d08770;">20</span><span>);
</span></code></pre>
<p>Let's make a complete program to see what we get:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">main</span><span>() {
</span><span>    </span><span style="color:#b48ead;">let mut</span><span> coordinates = vec![</span><span style="color:#d08770;">1</span><span>, </span><span style="color:#d08770;">3</span><span>, </span><span style="color:#d08770;">5</span><span>];
</span><span>    coordinates.</span><span style="color:#96b5b4;">push</span><span>(</span><span style="color:#d08770;">10</span><span>);
</span><span>    coordinates.</span><span style="color:#96b5b4;">push</span><span>(</span><span style="color:#d08770;">15</span><span>);
</span><span>    coordinates.</span><span style="color:#96b5b4;">push</span><span>(</span><span style="color:#d08770;">20</span><span>);
</span><span>
</span><span>    </span><span style="color:#b48ead;">for</span><span> coordinate in coordinates {
</span><span>        println!(&quot;</span><span style="color:#d08770;">{}</span><span>&quot;, coordinate);
</span><span>    }
</span><span>}
</span></code></pre>
<p>Here we initialize our vector with some default i32 values, then we push 3 more values into the vector. Finally, we use a for loop to print out the values to the console. Note that we don't need any type annotations because the Rust compiler can infer from the information we've provided.</p>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#bf616a;">Compiling</span><span> playground v0.0.1 (/playground)
</span><span>    </span><span style="color:#bf616a;">Finished</span><span> dev </span><span style="color:#b48ead;">[</span><span>unoptimized + debuginfo</span><span style="color:#b48ead;">]</span><span> target(s) </span><span style="color:#bf616a;">in</span><span> 0.37s
</span><span>     </span><span style="color:#bf616a;">Running </span><span>`</span><span style="color:#bf616a;">target/debug/playground</span><span>`
</span><span>
</span><span> </span><span style="color:#bf616a;">1
</span><span> </span><span style="color:#bf616a;">3
</span><span> </span><span style="color:#bf616a;">5
</span><span> </span><span style="color:#bf616a;">10
</span><span> </span><span style="color:#bf616a;">15
</span><span> </span><span style="color:#bf616a;">20
</span></code></pre>
<h3 id="reading-the-elements-in-a-vector">Reading the Elements in a Vector</h3>
<p>So, we can add elements to our vector, how do we read the elements back? Rust gives us a couple of ways, depending on what we want our program to do.</p>
<p><em>Panic Attack</em></p>
<p>The first way of reading an element is by simple indexing.</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">let</span><span> coordinates = vec![</span><span style="color:#d08770;">25</span><span>, </span><span style="color:#d08770;">24</span><span>, </span><span style="color:#d08770;">23</span><span>];
</span><span>
</span><span style="color:#b48ead;">let</span><span> z: &amp;</span><span style="color:#b48ead;">i32 </span><span>= &amp;coordinates[</span><span style="color:#d08770;">2</span><span>];
</span></code></pre>
<p>In one of the greatest quirks of computer science, which to this day trips just about everyone up at one time or another, vectors are indexed starting at zero. In the previous example, the indices of our coordinates vector are 0, 1, 2. To get the third element, let's call it the 'z' coordinate, we use &amp; and [] along with the index 2, to give us a reference to the element 23.</p>
<p>This is all fine and happy if the element at the index we request exists. What if it doesn't? If it doesn't, the program panics and immediately terminates. We might want that behaviour, so it is a legitmate option.</p>
<p><em>More Elegant Way</em></p>
<p>There is another more elegant way to handle the possibility of a vector element not existing:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">let</span><span> coordinates = vec![</span><span style="color:#d08770;">25</span><span>, </span><span style="color:#d08770;">24</span><span>, </span><span style="color:#d08770;">23</span><span>];
</span><span>
</span><span style="color:#b48ead;">let</span><span> z: Option&lt;&amp;32&gt; = coordinates.</span><span style="color:#96b5b4;">get</span><span>(</span><span style="color:#d08770;">2</span><span>);
</span><span style="color:#b48ead;">match</span><span> z {
</span><span>    Some(z) =&gt; println!(&quot;</span><span style="color:#a3be8c;">The z coordinate is </span><span style="color:#d08770;">{z}</span><span>&quot;),
</span><span>    None() =&gt; println!(&quot;</span><span style="color:#a3be8c;">Oops, no third element exists in this vector!);
</span><span style="color:#a3be8c;">}
</span></code></pre>
<p>The .get() method, when passed an index that is outside of the vector's range, leverages the Option type and returns a None value without the panic. You can then use the match statement to gracefully handle the possibilities. This approach results in more user friendliness than a panic and crash, because you can craft error messages to explain what happened.</p>
<h3 id="enums-to-store-multiple-types">Enums to Store Multiple Types</h3>
<p>Remember earlier I said that vectors can only hold data of the same type? Well, I lied a teeny tiny bit. We can leverage Rust's enum type to get around this limitation. There are times when we may want to have a list of items that have different types.</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">enum </span><span>SportsTeam {
</span><span>    Name(String),
</span><span>    Conference(String),
</span><span>    Standing(</span><span style="color:#b48ead;">i32</span><span>),
</span><span>}
</span><span>
</span><span style="color:#b48ead;">let</span><span> teams = vec![
</span><span>    SportsTeam::Name(String::from(&quot;</span><span style="color:#a3be8c;">Seattle Seahawks</span><span>&quot;)),
</span><span>    SportsTeam::Conference(String::from(&quot;</span><span style="color:#a3be8c;">NFC West</span><span>&quot;)),
</span><span>    SportsTeam::Standing(</span><span style="color:#d08770;">2</span><span>)
</span><span>];
</span></code></pre>
<p>This is not the greatest example, because the variations represented by the enum SportsTeam are not that dramatically different. However, it illustrates that we can create a vector to hold some information about our sports team and because the underlying type of each vector element is an enum, this satisfies the need that the elements all be of the same type.</p>
<p>A vector is stored on the heap. The Rust compiler must know exactly how much memory space to allocate at compile time. A match expression needs to be used which aids the compiler in ensuring that every possible variation is handled. If the data in your program is such that you can't know the exhaustive set of types at runtime that a vector will contain, then this enum technique won't work. The solution is to use a trait object, which I'll cover in a future article.</p>
<h2 id="conclusion">Conclusion</h2>
<p>This article has been my take on vectors. I've gone over the basics, but be sure to check out the Rust Standard Library documentation for the std::vec module, as there are more things you can do with this powerful and flexible data type.</p>
<p>Thanks for reading!</p>
<h2 id="references">References</h2>
<p><a rel="noopener noreferrer" target="_blank" href="https://doc.rust-lang.org/std/vec/index.html">Rust Standard Library, Module std::vec</a></p>
<p><a rel="noopener noreferrer" target="_blank" href="https://doc.rust-lang.org/book/ch08-01-vectors.html">The Rust Programming Language, Chapter 8.1 Storing List of Values with Vectors</a></p>


        
    

        
        
    </article></div>
    <div class="pagination">
        <div class="pagination__buttons">
            </div>
    </div>
<footer class="footer">
        <div class="footer__inner"><div class="copyright">
            <span>© 2024 Jeffery D Mitchell :: Powered by <a href="https://www.getzola.org/">Zola</a>:: Zerm theme made by <a href="https://github.com/ejmg">ejmg</a> :: Hosted on <a href="https://shuttle.rs">Shuttle</a> :: Follow me (and ask questions or comment) on <a href="https://bsky.app/profile/jeff-mitchell-dev.bsky.social">Bluesky</a></span>
        </div>
    <script type="text/javascript" src="https://jeff-mitchell.dev/assets/js/main.js"></script>
</div>
        

      </footer></div>
    <!-- Default Statcounter code for Jeff Mitchell Dev https://jeff-mitchell.dev
-->
    <script type="text/javascript">
      var sc_project = 13027926;
      var sc_invisible = 1;
      var sc_security = "1625b230";
    </script>
    <script
      type="text/javascript"
      src="https://www.statcounter.com/counter/counter.js"
      async
    ></script>
    <noscript
      ><div class="statcounter">
        <a
          title="Web Analytics Made Easy -
Statcounter"
          href="https://statcounter.com/"
          target="_blank"
          ><img
            class="statcounter"
            src="https://c.statcounter.com/13027926/0/1625b230/1/"
            alt="Web Analytics Made Easy - Statcounter"
            referrerpolicy="no-referrer-when-downgrade"
        /></a></div
    ></noscript>
    <!-- End of Statcounter Code -->
     <script type="text/javascript" src="https://jeff-mitchell.dev/elasticlunr.min.js"></script>
     <script type="text/javascript" src="https://jeff-mitchell.dev/search.js"></script>
  </body>
</html>
